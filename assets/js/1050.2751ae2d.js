(window.webpackJsonp=window.webpackJsonp||[]).push([[1050],{1974:function(e,t,a){"use strict";a.r(t);var o=a(21),r=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"android-module-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#android-module-project"}},[e._v("#")]),e._v(" Android Module Project")]),e._v(" "),a("h2",{attrs:{id:"introduction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[e._v("#")]),e._v(" Introduction")]),e._v(" "),a("p",[e._v("This guide covers how to manage your module project as well as how to add third-party frameworks and bundle assets with your module. You can use Studio, Eclipse or the Appc-CLI to build Android modules.")]),e._v(" "),a("h2",{attrs:{id:"prerequisites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),a("p",[e._v("To develop an Android-based Module, you need to install the following tools and setup a few additional environment variables:")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Titanium SDK")])]),e._v(" "),a("li",[a("p",[e._v("Android SDK API 26+")])]),e._v(" "),a("li",[a("p",[e._v("Studio or the Appcelerator Command-Line Interface (CLI) for creating modules, and building and running test applications")])]),e._v(" "),a("li",[a("p",[a("RouterLink",{attrs:{to:"/guide/Titanium_SDK/Titanium_SDK_Getting_Started/Installation_and_Configuration/Installing_Titanium_Advanced_Tools/Installing_the_Android_NDK/"}},[e._v("Android NDK")]),e._v(" and add an ANDROID_NDK environment variable pointing to the NDK directory. See "),a("RouterLink",{attrs:{to:"/guide/Titanium_SDK/Titanium_SDK_Getting_Started/Installation_and_Configuration/Installing_Titanium_Advanced_Tools/Installing_the_Android_NDK/"}},[e._v("Installing the Android NDK")]),e._v(".")],1)]),e._v(" "),a("li",[a("p",[a("RouterLink",{attrs:{to:"/guide/Titanium_SDK/Titanium_SDK_Getting_Started/Installation_and_Configuration/Installing_Titanium_Advanced_Tools/Installing_gperf/"}},[e._v("gperf")]),e._v(" must be installed and in your system PATH. See "),a("RouterLink",{attrs:{to:"/guide/Titanium_SDK/Titanium_SDK_Getting_Started/Installation_and_Configuration/Installing_Titanium_Advanced_Tools/Installing_gperf/"}},[e._v("Installing gperf")]),e._v(".")],1)]),e._v(" "),a("li",[a("p",[e._v("Python, Python setuptools and the markdown module, and Python in your system PATH. See "),a("a",{attrs:{href:"#undefined"}},[e._v("Installing Python")]),e._v(" and "),a("a",{attrs:{href:"#undefined"}},[e._v("Installing Required Python Packages")]),e._v(".")])])]),e._v(" "),a("p",[e._v("If you want to use Studio, install:")]),e._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://eclipse.org/jdt/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Eclipse Java Development Tools plugin"),a("OutboundLink")],1),e._v(". See "),a("RouterLink",{attrs:{to:"/guide/Axway_Appcelerator_Studio/Axway_Appcelerator_Studio_Getting_Started/Installing_the_Java_Development_Tools/"}},[e._v("Installing the Java Development Tools")]),e._v(".")],1)]),e._v(" "),a("li",[a("p",[a("a",{attrs:{href:"http://developer.android.com/tools/sdk/eclipse-adt.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Android Development Tools plugin"),a("OutboundLink")],1),e._v(". See "),a("a",{attrs:{href:"#undefined"}},[e._v("Installing the Android Development Tools")]),e._v(".")])])]),e._v(" "),a("h2",{attrs:{id:"project-structure"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#project-structure"}},[e._v("#")]),e._v(" Project Structure")]),e._v(" "),a("p",[e._v("A number of files and directories work together to define our module and what it does. Let's take a quick look at each of them:")]),e._v(" "),a("table",{staticClass:"confluenceTable"},[a("thead",{staticClass:" "}),a("tfoot",{staticClass:" "}),a("tbody",{staticClass:" "},[a("tr",[a("td",{staticClass:"highlight-grey confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("File/Directory")])]),a("td",{staticClass:"highlight-grey confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("Description")])])]),a("tr",[a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("LICENSE")])]),a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("The module's full license text; this will be distributed with the module to let other developers know how they can use and redistribute it.")])])]),a("tr",[a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[a("code",[e._v("assets/")])])]),a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("The directory where you can place module assets such as images. The files in this directory are added as JAR resources which you can be fetch in Java via the "),a("a",{staticClass:"external-link external-link",attrs:{href:"https://developer.android.com/reference/java/lang/ClassLoader#getResourceAsStream(java.lang.String)",target:"_blank"}},[e._v("ClassLoader.getResourceAsStream()")]),e._v(" method. They're also copied to the APK's \"assets\" folder.")])])]),a("tr",[a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[a("code",[e._v("documentation/")])])]),a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("The directory where you should place your module documentation for end-users. The file "),a("code",[e._v("index.md")]),e._v(" is a Markdown-formatted template file that you should use when writing your module documentation. You may also write your documentation using the "),a("a",{staticClass:"document-link ",attrs:{href:"#!/guide/TDoc_Specification"}},[e._v("TDoc Specification")]),e._v(". You can safely ignore this directory if you do not intend to distribute your module.")])])]),a("tr",[a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[a("code",[e._v("example/")])])]),a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("The directory where your module example(s) should go. The file app.js will be generated to include a sample loading of your module in a test window. This file can be used for quickly testing your module as well as give an example to end-users on how to use your module. This directory is distributed with your module.")])])]),a("tr",[a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[a("code",[e._v("Resources/")])])]),a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("Supported as of Titanium 9.0.0. Files placed in this directory will be copied to the Android app's root \"Resources\" directory when built, making them accessible to the Titanium app's JavaScript files. These files are also accessible in Java via the "),a("code",[e._v("AssetManager")]),e._v(" class.")])])]),a("tr",[a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[a("code",[e._v("android/build.gradle")])])]),a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("As of Titanium 9.0.0, this optional gradle file allows a module to define its dependencies.")])])]),a("tr",[a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[a("code",[e._v("android/lib/")])])]),a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("Place any third-party JAR dependencies here and they will be bundled up as a part of your module automatically.")]),a("p",[e._v('As of Titanium 9.0.0, it is highly recommended to reference dependencies via "build.gradle" instead to avoid dependency collision with other modules.')])])]),a("tr",[a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[a("code",[e._v("android/manifest")])])]),a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("A special file that describes metadata about your module and used by the Titanium compiler. This file is required and is distributed with your module.")])])]),a("tr",[a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[a("code",[e._v("android/platform/android/AndroidManifest.xml")])])]),a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("As of Titanium 9.0.0, you can optionally specify the module's custom "),a("code",[e._v("AndroidManfiest.xml")]),e._v(" here. Alternatively, you can do the same within the "),a("code",[e._v("timodule.xml")]),e._v(" as documented below.")])])]),a("tr",[a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[a("code",[e._v("android/platform/android/aidl/")])])]),a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("As of Titanium 9.0.0, you can add Java code generation templates here, as defined by the "),a("a",{staticClass:"external-link external-link",attrs:{href:"https://developer.android.com/guide/components/aidl",target:"_blank"}},[e._v("Android Developer: AIDL")]),e._v(" guide.")])])]),a("tr",[a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[a("code",[e._v("android/platform/android/assets/")])])]),a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v('As of Titanium 9.0.0, you can optionally provide files that will be copied to the APK\'s root "assets" folder here.')])])]),a("tr",[a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[a("code",[e._v("android/platform/android/jniLibs/")])])]),a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("As of Titanium 9.0.0, you can add C/C++ "),a("code",[e._v("*.so")]),e._v(" libraries to be bundled with the module. These libraries must placed under subdirectories named after their respective architecture such as "),a("code",[e._v("armeabi-v7a")]),e._v(", "),a("code",[e._v("arm64-v8a")]),e._v(", "),a("code",[e._v("x86")]),e._v(", and "),a("code",[e._v("x86_64")]),e._v(".")])])]),a("tr",[a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[a("code",[e._v("android/platform/android/rs/")])])]),a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("As of Titanium 9.0.0, you can add RenderScript files here as defined by the "),a("a",{staticClass:"external-link external-link",attrs:{href:"https://developer.android.com/guide/topics/renderscript/compute",target:"_blank"}},[e._v("Android Developer: RenderScript")]),e._v(" guide.")])])]),a("tr",[a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[a("code",[e._v("android/platform/android/res/")])])]),a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("Optional folder where you can add Android resource files such as drawables, layouts, mipmaps, values, etc. as defined in the "),a("a",{staticClass:"external-link external-link",attrs:{href:"http://developer.android.com/guide/topics/resources/providing-resources.html",target:"_blank"}},[e._v("Android Developer: Providing Resources")]),e._v(" guide.")])])]),a("tr",[a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[a("code",[e._v("android/src/")])])]),a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("Folder containing your Java source files for the module. Can contain Kotlin source files as of Titanium 9.0.0. This directory is not distributed with your module.")])])]),a("tr",[a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[a("code",[e._v("android/timodule.xml")])])]),a("td",{staticClass:"confluenceTd",attrs:{rowspan:"1",colspan:"1"}},[a("p",[e._v("A place to put custom activities and general XML that will end up in the AndroidManifest.xml of apps. Read more about this file in the "),a("a",{staticClass:"document-link ",attrs:{href:"#!/guide/tiapp.xml_and_timodule.xml_Reference"}},[e._v("tiapp.xml and timodule.xml reference")]),e._v(".")])])])])]),e._v(" "),a("p",[e._v("The CLI creates a module project that contains multiple platforms. Each platform contains its own folder with platform-specific resources and common folders for "),a("code",[e._v("assets")]),e._v(", "),a("code",[e._v("documentation")]),e._v(", "),a("code",[e._v("example")]),e._v(", and "),a("code",[e._v("Resources")]),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"build-properties-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-properties-file"}},[e._v("#")]),e._v(" Build properties file")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("⚠️ Warning")]),e._v(" "),a("p",[e._v("This was deprecated since 5.0.0.")])]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("build.properties")]),e._v(" file contains build variables used by the Ant CLI. Using the build.properties is deprecated in favor of the unified build-command "),a("code",[e._v("appc ti build -p android --build-only.")])]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Variable")]),e._v(" "),a("th",[e._v("Description")]),e._v(" "),a("th",[e._v("Example")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("titanium.platform")]),e._v(" "),a("td",[e._v("Path to the Titanium SDK "),a("code",[e._v("android")]),e._v(" folder")]),e._v(" "),a("td",[a("code",[e._v("/Users/<USERNAME>/Library/Application Support/Titanium/mobilesdk/osx/<VERSION>/android")])])]),e._v(" "),a("tr",[a("td",[e._v("android.platform")]),e._v(" "),a("td",[e._v("Path to the Android SDK "),a("code",[e._v("platforms")]),e._v(" folder")]),e._v(" "),a("td",[a("code",[e._v("/Users/<USERNAME>/opts/android-sdk/platforms/android-25")])])]),e._v(" "),a("tr",[a("td",[e._v("google.apis")]),e._v(" "),a("td",[e._v("Path to the Google APIs "),a("code",[e._v("add-ons")]),e._v(" folder")]),e._v(" "),a("td",[a("code",[e._v("/Users/<USERNAME>/opts/android-sdk/add-ons/addon-google_apis-google-25")])])]),e._v(" "),a("tr",[a("td",[e._v("android.ndk")]),e._v(" "),a("td",[e._v("Path to the Android NDK (if needed)")]),e._v(" "),a("td",[a("code",[e._v("/Users/<USERNAME>/opts/android-ndk")])])])])]),e._v(" "),a("h3",{attrs:{id:"manifest-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#manifest-file"}},[e._v("#")]),e._v(" Manifest file")]),e._v(" "),a("p",[e._v("Titanium module metadata is described in a special text file named "),a("code",[e._v("manifest")]),e._v(". This file is a simple key/value property format.")]),e._v(" "),a("p",[e._v("Before you distribute your module, you must edit this manifest and change a few values. Some of the values are pre-generated and should not be edited. These are noted with the comment before them. In the manifest file, any line starting with a hash character (#) is ignored. The following are the descriptions of each entry in the manifest:")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("strong",[e._v("Key")])]),e._v(" "),a("th",[a("strong",[e._v("Description/Purpose")])])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("version")]),e._v(" "),a("td",[e._v("This is the version of your module. You should change this value each time you make major changes and distribute them. Version should be in the dotted notation (X.Y.Z) and must not con-tain any spaces or non-number characters.")])]),e._v(" "),a("tr",[a("td",[e._v("architectures")]),e._v(" "),a("td",[e._v("The binary architectures the module supports as a delimited list. Example: x86 arm64-v8a")])]),e._v(" "),a("tr",[a("td",[e._v("description")]),e._v(" "),a("td",[e._v("This is a human-readable description of your module. It should be short and suitable for display next to your module name.")])]),e._v(" "),a("tr",[a("td",[e._v("author")]),e._v(" "),a("td",[e._v('This is a human-readable author name you want to display next to your module. It can simply be your personal name, such as "Jon Doe" or an organizational name such as "Axway Appcelerator".')])]),e._v(" "),a("tr",[a("td",[e._v("license")]),e._v(" "),a("td",[e._v('This is a human-readable name of your license. You should use a short description such as "Apache Public License", "MIT" or "Commercial".')])]),e._v(" "),a("tr",[a("td",[e._v("copyright")]),e._v(" "),a("td",[e._v('This is a human-readable copyright string for your module. For example, "Copyright (c) 2020 by Axway Appcelerator, Inc."')])]),e._v(" "),a("tr",[a("td",[e._v("name")]),e._v(" "),a("td",[e._v("This is a read-only name of your module that is generated when you created your project. You must not edit this value.")])]),e._v(" "),a("tr",[a("td",[e._v("moduleid")]),e._v(" "),a("td",[e._v("This is a read-only module id of your module that is generated when you created your project. You should not edit this value. NOTE: you must generate a unique id. We recommend using your reverse-DNS company name + module_name as a pattern to guarantee uniqueness. If you must edit this value, you must also edit the value in your module implementation file.")])]),e._v(" "),a("tr",[a("td",[e._v("guid")]),e._v(" "),a("td",[e._v("This is a read-only unique module id for your module that is generated when you created your project. You must not edit this value.")])]),e._v(" "),a("tr",[a("td",[e._v("platform")]),e._v(" "),a("td",[e._v("This is a read-only platform target of your module that is generated when you created your project. You must not edit this value.")])]),e._v(" "),a("tr",[a("td",[e._v("minsdk")]),e._v(" "),a("td",[e._v("The is a generated value for the minimum Titanium SDK version that was used when creating your module. The current minimum version for new Android modules is 7.0.0.")])]),e._v(" "),a("tr",[a("td",[e._v("respackage")]),e._v(" "),a("td",[e._v("This setting only applies to Titanium versions older than 9.0.0."),a("br"),a("br"),e._v("This is specific package name to generate a R.java. If you got exception like "),a("em",[a("code",[e._v("java.lang.NoClassDefFoundError: com.example.mypackage.R$layout")])]),e._v(" then add the following entry to the your module manifest file: "),a("em",[e._v("respackage: "),a("code",[e._v("com.example.mypackage")])]),e._v(" . This will generate a corresponding java R file "),a("code",[e._v("com.example.mypackage.R.java")])])])])]),e._v(" "),a("h2",{attrs:{id:"cli-tasks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cli-tasks"}},[e._v("#")]),e._v(" CLI tasks")]),e._v(" "),a("h3",{attrs:{id:"create-a-new-module-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-new-module-project"}},[e._v("#")]),e._v(" Create a new module project")]),e._v(" "),a("p",[e._v("To create a new module project, run the following Appcelerator CLI command:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("appc new -d /"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("PATH")]),e._v("/TO/WORKSPACE -n "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("MODULE NAME"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --id "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("MODULE ID"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n\n$ appc new -n "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("MODULE NAME"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --id "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("MODULE ID"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\nAppcelerator Command-Line Interface, version "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("7.1")]),e._v(".2\nCopyright "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2014")]),e._v("-2018, Appcelerator, Inc.  All Rights Reserved.\n? What "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("type")]),e._v(" of project are you creating?\n  Native App\n  Arrow App\n❯ Titanium Module "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("timodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n  Apple Watch App\n")])])]),a("p",[e._v("If you omit any of the options, the CLI will prompt you to enter them.")]),e._v(" "),a("h3",{attrs:{id:"build-and-package-the-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-and-package-the-module"}},[e._v("#")]),e._v(" Build and package the module")]),e._v(" "),a("p",[e._v("To build and package a module, run ti build in the "),a("code",[e._v("android")]),e._v(" directory.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" /"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("PATH_TO_MODULE_PROJECT"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("MODULE_NAME"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/android\nappc run -p android --build-only\n")])])]),a("p",[e._v("After the build completes, you should have a ZIP file in the "),a("code",[e._v("android/dist")]),e._v(" directory and see the following message in the console:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("** BUILD SUCCEEDED **\n")])])]),a("p",[e._v("With the ZIP file, you can either:")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Uncompress it in the Titanium SDK home path to install the module globally for all your Titanium applications")])]),e._v(" "),a("li",[a("p",[e._v("Uncompress it in a Titanium project's parent directory to install the module locally for that one Titanium application")])]),e._v(" "),a("li",[a("p",[e._v("Distribute the ZIP file")])])]),e._v(" "),a("h3",{attrs:{id:"clean-the-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#clean-the-project"}},[e._v("#")]),e._v(" Clean the project")]),e._v(" "),a("p",[e._v("Earlier, you could clean your module with "),a("code",[e._v("ant clean")]),e._v(". These days, using the Appc-CLI, the build will be cleaned automatically before a new build is made.")]),e._v(" "),a("h2",{attrs:{id:"studio-tasks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#studio-tasks"}},[e._v("#")]),e._v(" Studio tasks")]),e._v(" "),a("h3",{attrs:{id:"create-a-new-module-project-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-new-module-project-2"}},[e._v("#")]),e._v(" Create a new module project")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("From the menu, select "),a("strong",[e._v("File")]),e._v(" > "),a("strong",[e._v("New")]),e._v(" > "),a("strong",[e._v("Mobile Module Project")]),e._v(" to open the "),a("strong",[e._v("New Mobile Module Project")]),e._v(" dialog.")])]),e._v(" "),a("li",[a("p",[e._v("In the "),a("strong",[e._v("Project name")]),e._v(" field, enter a name for the module.")])]),e._v(" "),a("li",[a("p",[e._v("In the "),a("strong",[e._v("Module ID")]),e._v(" field, enter a module ID for the module.")])]),e._v(" "),a("li",[a("p",[e._v("In "),a("strong",[e._v("Deployment Targets")]),e._v(", select "),a("strong",[e._v("Android")]),e._v(".")])]),e._v(" "),a("li",[a("p",[e._v("Click "),a("strong",[e._v("Next.")])])]),e._v(" "),a("li",[a("p",[e._v("In the "),a("strong",[e._v("Module Manifest File")]),e._v(" page, enter information about your module, such as the license information, version number, etc. You can also edit this information in the "),a("code",[e._v("manifest")]),e._v(" file later.")])]),e._v(" "),a("li",[a("p",[e._v("Click "),a("strong",[e._v("Finish")]),e._v(".")])])]),e._v(" "),a("h3",{attrs:{id:"build-and-package-the-module-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-and-package-the-module-2"}},[e._v("#")]),e._v(" Build and package the module")]),e._v(" "),a("p",[e._v("You can either use Studio's launch toolbar or use Ant from the right-click context menu.")]),e._v(" "),a("h4",{attrs:{id:"studio-toolbar"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#studio-toolbar"}},[e._v("#")]),e._v(" Studio Toolbar")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Select your module folder in the "),a("strong",[e._v("Project Explorer")]),e._v(" view.")])]),e._v(" "),a("li",[a("p",[e._v("Verify "),a("strong",[e._v("Package")]),e._v(" and "),a("strong",[e._v("Android Module")]),e._v(" are displayed in "),a("strong",[e._v("Launch Mode")]),e._v(" and "),a("strong",[e._v("Launch Target")]),e._v(", respectively.")])]),e._v(" "),a("li",[a("p",[e._v("Click the Package icon to open the "),a("strong",[e._v("Package Android Module")]),e._v(" dialog.")])]),e._v(" "),a("li",[a("p",[e._v("In "),a("strong",[e._v("Output Location")]),e._v(", select either")]),e._v(" "),a("ol",[a("li",[a("p",[a("strong",[e._v("Titanium SDK")]),e._v(" to install the module in the Titanium SDK home path to be accessed by any Titanium application")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("Mobile App Project")]),e._v(" and choose an application to install the module locally that can be accessed by one that Titanium application")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("Location")]),e._v(" and enter a path to copy the ZIP file to for distribution")])])])]),e._v(" "),a("li",[a("p",[e._v("Click "),a("strong",[e._v("Finish")]),e._v(".")])])]),e._v(" "),a("p",[e._v("In the "),a("strong",[e._v("Console")]),e._v(" view, you will see the build log output. After the build completes, the package (ZIP file) will be in the module's "),a("code",[e._v("android/dist")]),e._v(" folder.")]),e._v(" "),a("h2",{attrs:{id:"test-the-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#test-the-module"}},[e._v("#")]),e._v(" Test the module")]),e._v(" "),a("p",[e._v("To test a module:")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Create a new Titanium Classic or Alloy project.")])]),e._v(" "),a("li",[a("p",[e._v("Install the module to either the Titanium SDK home directory or in the project.")])]),e._v(" "),a("li",[a("p",[e._v("Add the module as a dependency to the project.")])]),e._v(" "),a("li",[a("p",[e._v("Load the module and make module API calls.")])])]),e._v(" "),a("h2",{attrs:{id:"debug-the-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#debug-the-module"}},[e._v("#")]),e._v(" Debug the module")]),e._v(" "),a("p",[e._v("The best way to debug your Android modules right now is a bit old fashioned. When there is a problem or unexpected behavior in your module, use log statements to trace through your code's execution. The Java "),a("a",{attrs:{href:"http://builds.appcelerator.com.s3.amazonaws.com/module-apidoc/2.0.0/android/org/appcelerator/kroll/common/Log.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Log"),a("OutboundLink")],1),e._v(" class offers several static methods for writing to the log. It is considered a best practice to define a LCAT or TAG variable at the top of your class, and to use that as the first parameter to all calls to Log.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('private static final String TAG = "FooProxy";\n\n@Kroll.method\npublic void fooFunction(String arg)\n{\n    Log.i(TAG, "fooFunction received: " + arg);\n}\n')])])]),a("h2",{attrs:{id:"adding-3rd-party-libraries"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#adding-3rd-party-libraries"}},[e._v("#")]),e._v(" Adding 3rd party libraries")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("⚠️ Warning")]),e._v(" "),a("p",[e._v("As of Titanium 9.0.0, you can no longer use Google's deprecated Support libraries. You must use the AndroidX libraries instead.")])]),e._v(" "),a("h3",{attrs:{id:"gradle-dependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gradle-dependencies"}},[e._v("#")]),e._v(" Gradle Dependencies")]),e._v(" "),a("p",[e._v("As of Titanium 9.0.0, you can reference libraries via gradle by adding a "),a("code",[e._v("build.gradle")]),e._v(" file to the module's root "),a("code",[e._v("android")]),e._v(" directory. This is the preferred way of adding libraries because the gradle build system will automatically include a dependency's dependencies and resolve version conflicts.")]),e._v(" "),a("p",[e._v("An example can be found here: "),a("a",{attrs:{href:"https://github.com/appcelerator-modules/ti.map/blob/master/android/build.gradle",target:"_blank",rel:"noopener noreferrer"}},[e._v("ti.map/android/build.gradle"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("The below is an example "),a("code",[e._v("build.gradle")]),e._v(' file which provides access to the Google "Material Components" library.')]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("dependencies {\n    implementation 'com.google.android.material:material:1.1.0'\n}\n")])])]),a("h3",{attrs:{id:"local-dependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#local-dependencies"}},[e._v("#")]),e._v(" Local Dependencies")]),e._v(" "),a("p",[e._v("To use a third-party JAR in your module, add the JAR file to the module's "),a("code",[e._v("lib")]),e._v(" directory (not the "),a("code",[e._v("libs")]),e._v(" directory), so it can be copied over during the module's build process and linked when building the application. If you are using Studio, you need to add the JAR as a dependency to the module project before importing the package and making API calls.")]),e._v(" "),a("p",[e._v("To add a JAR as a dependency in Studio:")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Right-click the module project (root folder) and select "),a("strong",[e._v("Properties")]),e._v(" to open the project's properties dialog.")])]),e._v(" "),a("li",[a("p",[e._v("In the left pane, select "),a("strong",[e._v("Java Build Path")]),e._v(".")])]),e._v(" "),a("li",[a("p",[e._v("In the right pane, click the "),a("strong",[e._v("Libraries")]),e._v(" tab.")])]),e._v(" "),a("li",[a("p",[e._v("Click the "),a("strong",[e._v("Add External JARs...")]),e._v(" button to open the "),a("strong",[e._v("JAR Selection")]),e._v(" dialog.")])]),e._v(" "),a("li",[a("p",[e._v("Navigate to the module's "),a("code",[e._v("android/lib")]),e._v(" folder and select the JAR to add.")])]),e._v(" "),a("li",[a("p",[e._v("Click "),a("strong",[e._v("Open")]),e._v(". The JAR should be added to the JARs list.")])]),e._v(" "),a("li",[a("p",[e._v("Click "),a("strong",[e._v("OK")]),e._v(" to dismiss the dialog.")])])]),e._v(" "),a("p",[e._v("With Titanium 6.1.1 - 8.3.1, you can also copy AAR (Android Archive) library files to the module's "),a("code",[e._v("lib")]),e._v(" directory. However, this is not supported as of Titanium 9.0.0, which requires you to reference these AAR libraries via a "),a("code",[e._v("build.gradle")]),e._v(" file instead.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("✅ Where do i get .aar files?")]),e._v(" "),a("p",[e._v("Most third-party libraries can be downloaded from either GitHub or from one of the popular repositories like "),a("a",{attrs:{href:"https://bintray.com/bintray/jcenter",target:"_blank",rel:"noopener noreferrer"}},[e._v("jCenter"),a("OutboundLink")],1),e._v(" or "),a("a",{attrs:{href:"http://maven%20central/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Maven Central"),a("OutboundLink")],1),e._v(". Copies of the Android Support Libraries can be found inside your Android SDK directory under "),a("code",[e._v("<andriod-sdk>/extras/android/m2repository/com/android")])])]),e._v(" "),a("h3",{attrs:{id:"adding-android-libraries-to-studio"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#adding-android-libraries-to-studio"}},[e._v("#")]),e._v(" Adding Android Libraries to Studio")]),e._v(" "),a("p",[e._v("To properly resolve any imports of your used Android Libraries in Studio, you need to add the JARs they are contained in to Studio's Java build path. Before you add any import statements to your code, build the project at least once. This is required to process the AAR files and extract the JAR files they contain. After that, add the required JARs to Studio just as described in the "),a("a",{attrs:{href:"#AddaThird-PartyJAR"}},[e._v("Add a Third-Party JAR")]),e._v(" section of this guide. The extracted JAR files can be found under "),a("code",[e._v("build/android/intermediates/exploded-aar")]),e._v(". There you'll find a directory for each AAR file. Inside each of those directories, add the "),a("code",[e._v("classes.jar")]),e._v(" and any additional JAR files under the "),a("code",[e._v("lib")]),e._v(" directory.")]),e._v(" "),a("h2",{attrs:{id:"bundling-files"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bundling-files"}},[e._v("#")]),e._v(" Bundling files")]),e._v(" "),a("p",[e._v("For Android modules, you can either add assets in the module's "),a("code",[e._v("assets")]),e._v(" folder or "),a("code",[e._v("android/platform")]),e._v(" folder.")]),e._v(" "),a("h3",{attrs:{id:"module-assets-folder"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module-assets-folder"}},[e._v("#")]),e._v(' Module "assets" folder')]),e._v(" "),a("p",[e._v("Files in the module's "),a("code",[e._v("assets")]),e._v(" folder are added as JAR resources. To access these files, use the Android Class's "),a("code",[e._v("getResource()")]),e._v("method to retrieve a "),a("code",[e._v("URL")]),e._v(" object or "),a("a",{attrs:{href:"http://developer.android.com/reference/java/lang/Class.html#getResourceAsStream(java.lang.String)",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("getResourceAsStream()")]),a("OutboundLink")],1),e._v(" method to retrieve an "),a("code",[e._v("InputStream")]),e._v(" object.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// original file was in assets/image.png\nURL url = getClass().getClassLoader().getResource('assets/image.png');\nLog.i('GETFILE', url.toString());\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("⚠️ Warning")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("README")]),e._v(" file and JavaScript files (any file with a "),a("code",[e._v(".js")]),e._v(" extension) in the "),a("code",[e._v("assets")]),e._v(" folder are not added to the JAR library.")])]),e._v(" "),a("h3",{attrs:{id:"module-platform-android-res-folder"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module-platform-android-res-folder"}},[e._v("#")]),e._v(' Module "platform/android/res" folder')]),e._v(" "),a("p",[e._v("Add any of the resource directories defined in "),a("a",{attrs:{href:"http://developer.android.com/guide/topics/resources/providing-resources.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Android Developer: Providing Resources"),a("OutboundLink")],1),e._v(" to add drawables, layouts, values, etc. to the built app. To access these files, you can use the Titanium SDK "),a("code",[e._v("TiRHelper")]),e._v("helper class.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// original file was in android/platform/android/res/drawable/image.png\nint result = 0;\ntry {\n    result = TiRHelper.getApplicationResource('drawable.image');\n    Log.i(\"GOODSTUFF\", new Integer(result).toString());\n} catch (ResourceNotFoundException e) {\n    Log.e('BADSTUFF', '[ERROR] EXCEPTION -- RESOURCE NOT FOUND');\n}\n")])])]),a("h2",{attrs:{id:"format-lint-source-code"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#format-lint-source-code"}},[e._v("#")]),e._v(" Format / Lint source-code")]),e._v(" "),a("p",[e._v("The Titanium SDK uses clang-format to have a unified code-style in its source-code (clang-format for iOS and Android, ESLint for the CLI). You can do the same by following the following few steps:")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Copy the "),a("code",[e._v(".clang-format")]),e._v(" file from "),a("a",{attrs:{href:"https://github.com/appcelerator/titanium_mobile/blob/master/android/.clang-format",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1),e._v(' to the "'),a("code",[e._v("android/")]),e._v('" directory of your module project, e.g. '),a("code",[e._v("<module-root>/ios/.clang-format")])])]),e._v(" "),a("li",[a("p",[e._v("Install the "),a("a",{attrs:{href:"https://clang.llvm.org/docs/ClangFormat.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("clang-format CLI"),a("OutboundLink")],1),e._v(": "),a("code",[e._v("npm install -g clang-format")])])]),e._v(" "),a("li",[a("p",[e._v("Optional: Ensure that you have your module project in Git to be able to restore the old files in case you do not like the predefined format")])]),e._v(" "),a("li",[a("p",[e._v("Format your source with: "),a("code",[e._v("clang-format -style=file -i src/<yourmodule>/*.java")])])]),e._v(" "),a("li",[a("p",[e._v("Thats it! All *.java files have been formatted.")])])]),e._v(" "),a("p",[e._v("Now that you have a format, you can also extend your .clang-format with more formatting rules or adjust existing ones to match your own code style.")]),e._v(" "),a("h2",{attrs:{id:"troubleshooting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting"}},[e._v("#")]),e._v(" Troubleshooting")]),e._v(" "),a("h3",{attrs:{id:"conflicting-jar-files-google-play-services"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#conflicting-jar-files-google-play-services"}},[e._v("#")]),e._v(" Conflicting JAR files / Google Play Services")]),e._v(" "),a("p",[e._v("When building an application that includes two or more modules that contains the same library, in particular, the "),a("code",[e._v("google-play-services.jar")]),e._v(", the JAR files may conflict indicating that each module is using a different version of the library.")]),e._v(" "),a("p",[a("strong",[e._v("Error Log")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('[ERROR] Application Installer abnormal process termination. Process exit value was 1\n[ERROR] :  Conflicting jar files detected:\n[ERROR] :\n[ERROR] :  The following modules have different "google-play-services.jar" files\n[ERROR] :     mymodule   (version 3.0.3) (hash=8b95ece0c3ae132fb898ec8beef1cb2d)\n[ERROR] :     ti.map     (version 2.2.3) (hash=a9b753b4c63719e24d0022e341c57b2e)\n[ERROR] :\n[ERROR] :  You can either select a version of these modules where the conflicting jar file is the same or you\n[ERROR] :  can try copying the jar file from one module\'s "lib" folder to the other module\'s "lib" folder.\n')])])]),a("p",[e._v("Prior to Titanium SDK 7.0.0, to resolve this issue, you can either delete one of the JAR files from one of the modules or copy the JAR file from one module's "),a("code",[e._v("lib")]),e._v(" folder to the other's to make both versions the same. This solution only works on a per-application basis and is not a global solution. In Titanium 7.0.0 and later, use the t"),a("a",{attrs:{href:"https://github.com/appcelerator-modules/ti.playservices",target:"_blank",rel:"noopener noreferrer"}},[e._v("i.playservices"),a("OutboundLink")],1),e._v(" module to handle play services dependencies centralized. Simply add it to your timodule.xml and users will be notified if they do not include the module in their project.")]),e._v(" "),a("h3",{attrs:{id:"android-ndk-build-fails"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#android-ndk-build-fails"}},[e._v("#")]),e._v(" Android NDK build fails")]),e._v(" "),a("p",[e._v("If the Android NDK build fails, it can be because of various reasons:")]),e._v(" "),a("ul",[a("li",[a("p",[e._v('Your module has compile errors. Usually the build on the "javac" compile step already, but in case it does not, scroll up in the logs to see the actual error)')])]),e._v(" "),a("li",[a("p",[e._v("Your NDK version is outdated (Check for the latest version "),a("a",{attrs:{href:"https://developer.android.com/ndk/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1),e._v(")")])]),e._v(" "),a("li",[a("p",[e._v("Your project path contains spaces, which is not recommended for projects in general but especially causes build failures like "),a("code",[e._v("/android-ndk/build/core/build-local.mk:158: *** Android NDK: Aborting")]),e._v(", which is an Android NDK error for spaces in projects OR invalid directories for the Android NDK. Please note that spaces in a sub-directory can also cause this.")])])]),e._v(" "),a("p",[e._v('In any case, ensure to run your Titanium module build with log-level "trace" (e.g. '),a("code",[e._v("appc run -p android -build-only -l trace")]),e._v(") to see the whole build command. If you find issues that are not listed here, feel free to let us know via "),a("a",{attrs:{href:"http://jira.appcelerator.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("JIRA"),a("OutboundLink")],1),e._v(" or "),a("a",{attrs:{href:"http://tislack.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("TiSlack"),a("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);t.default=r.exports}}]);